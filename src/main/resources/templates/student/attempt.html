<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quiz Attempt</title>
  <link rel="stylesheet" th:href="@{/bootstrap.min.css}" href="/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
  <h1 th:text="${question.title}">Titel</h1>
  <h2 th:text="${question.task}">Aufgabe:</h2>

  <div th:if="${question.type == 'text'}">
    <form th:action="@{/quiz/submit/text/{quizId}/{questionIndex}(quizId=${quizID}, questionIndex=${questionIndex})}" method="post">
      <div class="form-group">
        <label for="answer">Ihre Antwort:</label>
        <textarea id="answer" name="answer" class="form-control" rows="4" placeholder="Geben Sie Ihre Antwort ein..."
                  th:text="${existingAnswer != null ? existingAnswer : ''}" required></textarea>
      </div>
      <button type="submit" class="btn btn-primary mt-3">Antwort senden</button>
    </form>
  </div>

  <div th:if="${question.type == 'multiple'}">
    <form th:action="@{/quiz/submit/multiple/{id}/{questionIndex}(id=${quizID}, questionIndex=${questionIndex})}" method="post">
      <div th:each="option, iterStat : ${question.options}" class="form-check">
        <label class="form-check-label" th:for="'option-' + iterStat.index">
          <input class="form-check-input"
                 type="checkbox"
                 th:id="'option-' + iterStat.index"
                 th:name="answer"
          th:value="${option}"
          th:checked="${existingAnswer != null and existingAnswer.contains(option)}" />
          <span th:text="${option}"></span>
        </label>
      </div>
      <button type="submit" class="btn btn-primary mt-3">Antwort senden</button>
    </form>
  </div>


  <div th:if="${questionIndex < totalQuestions - 1}">
    <a th:href="@{/quiz/{id}/answer-question/{index}(id=${quizID}, index=${questionIndex + 1})}" class="btn btn-secondary">
      Nächste Frage
    </a>
  </div>
  <div th:if="${question.questionIndex == totalQuestions - 1}">
    <a th:href="@{/quiz/{id}/complete(id=${quizID})}" class="btn btn-success">
      Quiz abschließen
    </a>
  </div>
</div>
<p th:text="${question.points}">punkte</p>
</body>
</html>